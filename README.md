# 游戏共享平台

通过frp服务器与远程用户一起玩网页游戏（如4399双人游戏）的解决方案，仅使用一个可用端口。

## 功能特点

- ✅ 基于frp的单端口多路复用
- ✅ 支持4399等网页游戏的远程共享
- ✅ 游戏画面实时同步
- ✅ 简单易用的Web界面
- ✅ 支持主机和客户端两种模式
- ✅ 自动配置和启动
- ✅ 内置常用双人游戏链接

## 技术原理

1. **单端口复用**：利用frp的HTTP虚拟主机功能，通过路径路由实现一个端口对应多个服务
2. **游戏共享**：通过HTTP服务共享游戏界面，控制信息通过专用通道传输
3. **网络穿透**：使用frp进行NAT穿透，解决内网无法被外网访问的问题
4. **自动部署**：Python脚本自动下载、配置和管理frp服务

## 快速开始

### 前提条件

- Windows操作系统
- Python 3.6或更高版本
- 一个具有公网IP的服务器（用于运行frp服务端）
- 服务器上至少有一个可用端口

### 使用方法

#### 1. 服务器端设置

在具有公网IP的服务器上运行：

```bash
# 双击运行启动脚本
start_server.bat
```

这将启动frp服务器，监听端口7000（用于frp通信）和8080（用于HTTP服务）。

#### 2. 游戏主机设置

作为游戏房主，运行：

```bash
# 双击运行启动脚本
start_host.bat
```

这将：
- 自动下载frp工具（首次运行）
- 启动HTTP服务器（端口8000）
- 启动frp客户端进行端口转发
- 游戏可以通过 http://game:8080 访问

#### 3. 游戏客户端设置

作为加入者，运行：

```bash
# 双击运行启动脚本
start_client.bat
```

然后在界面中输入主机IP和房间代码即可加入游戏。

## 提供的文件

- **game_share_manager.py**：核心管理脚本，处理frp下载、配置和服务管理
- **start_server.bat**：启动frp服务器的批处理文件
- **start_host.bat**：启动游戏主机的批处理文件
- **start_client.bat**：启动游戏客户端的批处理文件
- **start.ps1**：PowerShell启动脚本（备用）
- **README.md**：项目说明文档

## 配置说明

### 主要配置文件

- **frps.ini**：frp服务器配置
- **frpc.ini**：frp客户端配置
- **config.json**：平台全局配置（自动生成）

### 端口说明

- **7000**：frp服务通信端口
- **8080**：HTTP虚拟主机服务端口
- **8000**：本地HTTP服务器端口
- **8088**：WebRTC控制通道端口

## 常见问题

### 1. 无法连接到frp服务器

- 检查服务器防火墙是否开放了7000和8080端口
- 确认配置文件中的服务器IP地址是否正确
- 验证token是否匹配

### 2. 游戏无法加载或画面不同步

- 检查网络连接稳定性
- 尝试刷新浏览器页面
- 确保双方使用相同版本的浏览器

### 3. Python错误

- 确保已安装Python 3.6或更高版本
- 确保Python已添加到系统环境变量

### 4. 端口已被占用

修改配置文件中的端口设置，选择未被使用的端口。

## 高级选项

### 自定义frp版本

编辑`config.json`文件，修改`frp_version`和`frp_download_url`参数。

### 安全性增强

- 更改默认的`token`值为强密码
- 设置更复杂的frp控制面板密码

## 注意事项

- 本平台仅用于合法目的，请勿用于任何违法活动
- 游戏版权归原作者所有，请尊重版权
- 请确保您的服务器带宽足够支持多人同时使用
- 首次运行会自动下载frp工具，请确保网络连接正常

## License

MIT License