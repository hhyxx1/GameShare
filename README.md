# 游戏共享平台

通过frp服务器与远程用户一起玩网页游戏（如4399双人游戏）的解决方案，仅使用一个可用端口。

## 功能特点

- ✅ 基于frp的单端口多路复用
- ✅ 支持4399等网页游戏的远程共享
- ✅ 游戏画面实时同步
- ✅ 简单易用的Web界面
- ✅ 支持主机和客户端两种模式
- ✅ 自动配置和启动
- ✅ 内置常用双人游戏链接

## 技术原理

1. **单端口复用**：利用frp的HTTP虚拟主机功能，通过路径路由实现一个端口对应多个服务
2. **游戏共享**：通过HTTP服务共享游戏界面，控制信息通过专用通道传输
3. **网络穿透**：使用frp进行NAT穿透，解决内网无法被外网访问的问题
4. **自动部署**：Python脚本自动下载、配置和管理frp服务

## 快速开始

### 前提条件

- Windows操作系统
- Python 3.6或更高版本
- 一个具有公网IP的服务器（用于运行frp服务端，如不使用自定义服务器可跳过）
- 服务器上至少有一个可用端口

### 使用方法

运行统一启动脚本：

```bash
start.bat
```

然后根据提示选择您需要的模式：

1. **服务器模式**：在具有公网IP的服务器上运行，提供FRP内网穿透服务
2. **游戏主机模式**：作为游戏房主，启动本地HTTP服务器并连接FRP服务
3. **游戏客户端模式**：作为加入者，提供游戏访问界面
4. **下载FRP工具**：下载所需的FRP工具（首次运行时需要）

#### 游戏主机模式说明

选择游戏主机模式后，系统将：
- 检查并启动HTTP服务器（默认端口8000）
- 启动FRP客户端进行端口转发
- 显示本地访问地址和远程访问地址

#### 游戏客户端模式说明

选择游戏客户端模式后，系统将在8001端口启动客户端界面，您可以通过此界面输入主机的远程访问地址来加入游戏。

## 提供的文件

- **game_share_manager.py**：核心管理脚本，处理frp下载、配置和服务管理
- **start.bat**：统一启动脚本，提供服务器、主机和客户端模式
- **README.md**：项目说明文档

## 配置说明

配置由程序内部管理，无需手动修改配置文件。如需自定义配置，可在`config.json`中设置以下参数：

```json
{
  "local_http_port": 8000,
  "remote_control_port": 8888,
  "use_tcp_tunnel": true,
  "remote_frp_server": "frp-dry.com",
  "remote_frp_port": 49867,
  "frp_token": "game_share_secret_token",
  "frp_bind_port": 7000,
  "frp_http_port": 8080
}

### 端口说明

- **7000**：frp服务通信端口
- **8080**：HTTP虚拟主机服务端口
- **8000**：本地HTTP服务器端口
- **8088**：WebRTC控制通道端口

## 常见问题

### 1. 无法连接到frp服务器

- 检查服务器防火墙是否开放了7000和8080端口
- 确认配置文件中的服务器IP地址是否正确
- 验证token是否匹配

### 2. 游戏无法加载或画面不同步

- 检查网络连接稳定性
- 尝试刷新浏览器页面
- 确保双方使用相同版本的浏览器

### 3. Python错误

- 确保已安装Python 3.6或更高版本
- 确保Python已添加到系统环境变量

### 4. 端口已被占用

修改配置文件中的端口设置，选择未被使用的端口。

## 高级选项

### 自定义frp版本

编辑`config.json`文件，修改`frp_version`和`frp_download_url`参数。

### 安全性增强

- 更改默认的`token`值为强密码
- 设置更复杂的frp控制面板密码

## 注意事项

- 本平台仅用于合法目的，请勿用于任何违法活动
- 游戏版权归原作者所有，请尊重版权
- 请确保您的服务器带宽足够支持多人同时使用
- 首次运行会自动下载frp工具，请确保网络连接正常

## License

MIT License